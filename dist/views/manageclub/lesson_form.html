<div class="centre_align_boxes2">

    <div class="home_upper">
        <div class="back-box" ui-sref="dashboard.manage_club.edit_course({course_id: vm.club.lesson.course_id})">
              <i class="fa fa-arrow-circle-left"></i> BACK
          </div>
          <div class="welcome_title">
            <h2>LESSONS</h2> 
            <h4 class="capitalise">
              Manage your lessons
            </h4>
          </div>
    </div>

    <div class="center_if_large club_docs bookingout_wrapper">

      <form>


      <div class="club_docs_all">
        <h2>Lesson Details</h2>

        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.club.lesson.title" />
        </div>
        <div class="form-group">
          <label for="aim">Aim</label>
          <input type="text" class="form-control inputtext" name="aim" id="aim" ng-model="vm.club.lesson.aim" />
        </div>
         <div class="form-group">
          <label for="course_reference">Course Reference</label>
          <input type="text" class="form-control inputtext" name="course_reference" id="course_reference" ng-model="vm.club.lesson.course_reference" />
        </div>
         <div class="form-group">
          <label for="description">Description</label>
          <textarea class="form-control inputtext" name="description" id="description" ng-model="vm.club.lesson.description"></textarea>
        </div>


      </div>


       <div class="btns_bottom" ng-if="!vm.editing">
        <button class="btn btn-info" ng-click="back()">Back</button>
        <button class="btn btn-danger" ng-click="create()">Create Lesson</button>
      </div>


       <div class="club_docs_all" ng-if="vm.editing">
        <h2>TEM</h2>

            <div class="card" ng-if="vm.tem.length == 0">
              You don't have any TEM yet, please create one.
            </div>

            <div class="card" ng-if="vm.tem.length > 0">
                <table>
                    <tr>
                        <th>Threat / Error</th>
                        <th>Consequence</th>
                        <th>Mitigation</th>
                        <th>Functions</th>
                    </tr>
                    <tbody dnd-list="vm.tem">
                      <tr ng-repeat="tem in vm.tem" dnd-draggable="tem" dnd-moved="vm.tem.splice($index, 1);save_tem_order()">
                        <td>
                          <span ng-if="!tem.edit_me">{{ tem.threat }}</span> 
                          <input ng-if="tem.edit_me" type="text" class="form-control inputtext" name="title" id="title" ng-model="tem.threat" /></td>
                        <td>
                          <span ng-if="!tem.edit_me">{{ tem.consequence }}</span> 
                          <input ng-if="tem.edit_me" type="text" class="form-control inputtext" name="consequence" id="consequence" ng-model="tem.consequence" /></td>
                        <td>
                          <span ng-if="!tem.edit_me">{{ tem.mitigation }}</span> 
                          <input ng-if="tem.edit_me" type="text" class="form-control inputtext" name="mitigation" id="mitigation" ng-model="tem.mitigation" /></td>
                        <td>
                          <a ng-if="!tem.edit_me" ng-click="vm.edit_tem($index)" uib-tooltip="Edit"><i class="fa fa-edit list_icons"></i></a> 
                          &nbsp; 
                          <a ng-if="!tem.edit_me" ng-click="vm.delete_tem(tem, $index)" uib-tooltip="Delete"><i class="fa fa-trash-alt list_icons"></i></a>
                          <a ng-if="tem.edit_me" class="btn btn-danger" ng-click="vm.update_cancel($index)">CANCEL</a>                        
                          <a ng-if="tem.edit_me" class="btn btn-primary" ng-click="vm.update_tem(tem, $index)">SAVE</a>                        
                        </td>
                    </tr>
                     <tr class="dndPlaceholder background_content_dnd">
                        <td colspan="3">
                          Drop Here
                        </td>
                      </tr>
                    </tbody>
                </table>

            </div>

              <div class="card">
                <table>
                    <tr>
                        <th>Threat / Error</th>
                        <th>Consequence</th>
                        <th>Mitigation</th>
                        <th>Functions</th>
                    </tr>
                    <tr>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new_tem.threat" /></td>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new_tem.consequence" /></td>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new_tem.mitigation" /></td>
                        <td><a class="btn btn-primary" ng-click="vm.add_tem()" uib-tooltip="Add new TEM item">ADD TEM</a></td>
                    </tr>

                  </table>
                </div>


      </div>


      <div class="club_docs_all" ng-if="vm.editing">
        <h2>Pre-Flight</h2>

            <div class="card" ng-if="vm.bullets.preflight.length == 0">
              You don't have any Pre-Flight Items yet, please create one.
            </div>

            <div class="card" ng-if="vm.bullets.preflight.length > 0">
                <table dnd-list="vm.bullets.preflight">
                    <tr>
                        <th>Point</th>
                       
                        <th>Formatting</th>

                        <th>Functions</th>
                    </tr>
                    <tbody dnd-list="vm.bullets.preflight">
                      <tr ng-repeat="preflight in vm.bullets.preflight" dnd-draggable="preflight" dnd-moved="vm.bullets.preflight.splice($index, 1);save_bullet_order('preflight')">
                          <td>
                            <span ng-if="!preflight.edit_me" class='{{ (preflight.bullet_format == "0") ? "bullet" : "heading" }}'>{{ preflight.title }}</span> 
                            <input ng-if="preflight.edit_me" type="text" class="form-control inputtext" name="title" id="title" ng-model="preflight.title" />
                          </td>
                          <td><span ng-if="!preflight.edit_me">{{ (preflight.bullet_format == "0") ? "Bullet Point" : "Heading" }} </span>
                             <select ng-if="preflight.edit_me" class="form-control" ng-model="preflight.bullet_format">
                              <option value="0" selected="selected">Bullet Point</option>
                              <option value="1">Heading</option>
                            </select>
                          </td>
                          <td>
                            <a ng-if="!preflight.edit_me" ng-click="vm.edit_bullet('preflight', $index)" uib-tooltip="Edit"><i class="fa fa-edit list_icons"></i></a> 
                            &nbsp; 
                            <a ng-if="!preflight.edit_me" ng-click="vm.delete_bullet('preflight', preflight, $index)" uib-tooltip="Delete"><i class="fa fa-trash-alt list_icons"></i></a>
                            <a ng-if="preflight.edit_me" class="btn btn-danger" ng-click="vm.update_cancel_bullet('preflight',$index)">CANCEL</a>                        
                            <a ng-if="preflight.edit_me" class="btn btn-primary" ng-click="vm.update_bullet('preflight', preflight, $index)">SAVE</a>                        
                          </td>
                      </tr>
                      <tr class="dndPlaceholder background_content_dnd">
                        <td colspan="3">
                          Drop Here
                        </td>
                      </tr>
                    </tbody>
                    
                </table>

            </div>

              <div class="card">
                <table>
                    <tr>
                        <th>Point</th>
                        <th>Formatting</th>
                        <th>Functions</th>
                    </tr>
                    <tr>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new.preflight.title" /></td>
                        <td>
                          <select class="form-control" ng-model="vm.new.preflight.bullet_format">
                            <option value="0" selected="selected">Bullet Point</option>
                            <option value="1">Heading</option>
                          </select>
                        </td>
                        <td><a class="btn btn-primary" ng-click="vm.add_bullet('preflight')" uib-tooltip="Add new item">ADD POINT</a></td>
                    </tr>

                  </table>
                </div>


      </div>


      <div class="club_docs_all" ng-if="vm.editing">
        <h2>Air Exercises</h2>

            <div class="card" ng-if="vm.bullets.airex.length == 0">
              You don't have any Air Exercises yet, please create one.
            </div>

            <div class="card" ng-if="vm.bullets.airex.length > 0">
                <table>
                    <tr>
                        <th>Point</th>
                       
                        <th>Formatting</th>

                        <th>Functions</th>
                    </tr>
                    <tbody dnd-list="vm.bullets.airex">
                      <tr ng-repeat="airex in vm.bullets.airex" dnd-draggable="airex" dnd-moved="vm.bullets.airex.splice($index, 1);save_bullet_order('airex')">
                          <td>
                            <span ng-if="!airex.edit_me" ng-if="!airex.edit_me" class='{{ (airex.bullet_format == "0") ? "bullet" : "heading" }}'>{{ airex.title }}</span> 
                            <input ng-if="airex.edit_me" type="text" class="form-control inputtext" name="title" id="title" ng-model="airex.title" />
                          </td>
                           <td><span ng-if="!airex.edit_me">{{ (airex.bullet_format == "0") ? "Bullet Point" : "Heading" }} </span>
                             <select ng-if="airex.edit_me" class="form-control" ng-model="airex.bullet_format">
                              <option value="0" selected="selected">Bullet Point</option>
                              <option value="1">Heading</option>
                            </select>
                          </td>
                          <td>
                            <a ng-if="!airex.edit_me" ng-click="vm.edit_bullet('airex', $index)" uib-tooltip="Edit"><i class="fa fa-edit list_icons"></i></a> 
                            &nbsp; 
                            <a ng-if="!airex.edit_me" ng-click="vm.delete_bullet('airex', airex, $index)" uib-tooltip="Delete"><i class="fa fa-trash-alt list_icons"></i></a>
                            <a ng-if="airex.edit_me" class="btn btn-danger" ng-click="vm.update_cancel_bullet('airex',$index)">CANCEL</a>                        
                            <a ng-if="airex.edit_me" class="btn btn-primary" ng-click="vm.update_bullet('airex', airex, $index)">SAVE</a>                        
                          </td>
                      </tr>
                      <tr class="dndPlaceholder background_content_dnd">
                          <td colspan="3">
                            Drop Here
                          </td>
                      </tr>
                    </tbody>

                </table>

            </div>

              <div class="card">
                <table>
                    <tr>
                        <th>Point</th>
                        <th>Formatting</th>
                        <th>Functions</th>
                    </tr>
                    <tr>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new.airex.title" /></td>
                        <td>
                          <select class="form-control" ng-model="vm.new.airex.bullet_format">
                            <option value="0" selected="selected">Bullet Point</option>
                            <option value="1">Heading</option>
                          </select>
                        </td>
                        <td><a class="btn btn-primary" ng-click="vm.add_bullet('airex')" uib-tooltip="Add new item">ADD POINT</a></td>
                    </tr>

                  </table>
                </div>


      </div>


    
      <div class="club_docs_all" ng-if="vm.editing">
        <h2>Debrief</h2>

        <div class="card" ng-if="vm.bullets.debrief.length == 0">
              You don't have any Debrief Points yet, please create one.
            </div>

            <div class="card" ng-if="vm.bullets.debrief.length > 0">
                <table>
                    <tr>
                        <th>Point</th>
                       
                        <th>Formatting</th>

                        <th>Functions</th>
                    </tr>

                    <tbody dnd-list="vm.bullets.debrief">
                      <tr ng-repeat="debrief in vm.bullets.debrief" dnd-draggable="debrief" dnd-moved="vm.bullets.debrief.splice($index, 1);save_bullet_order('debrief')">
                        <td>
                          <span ng-if="!debrief.edit_me" ng-if="!debrief.edit_me" class='{{ (debrief.bullet_format == "0") ? "bullet" : "heading" }}'>{{ debrief.title }}</span> 
                          <input ng-if="debrief.edit_me" type="text" class="form-control inputtext" name="title" id="title" ng-model="debrief.title" />
                        </td>
                         <td><span ng-if="!debrief.edit_me">{{ (debrief.bullet_format == "0") ? "Bullet Point" : "Heading" }} </span>
                           <select ng-if="debrief.edit_me" class="form-control" ng-model="debrief.bullet_format">
                            <option value="0" selected="selected">Bullet Point</option>
                            <option value="1">Heading</option>
                          </select>
                        </td>
                        <td>
                          <a ng-if="!debrief.edit_me" ng-click="vm.edit_bullet('debrief', $index)" uib-tooltip="Edit"><i class="fa fa-edit list_icons"></i></a> 
                          &nbsp; 
                          <a ng-if="!debrief.edit_me" ng-click="vm.delete_bullet('debrief', debrief, $index)" uib-tooltip="Delete"><i class="fa fa-trash-alt list_icons"></i></a>
                          <a ng-if="debrief.edit_me" class="btn btn-danger" ng-click="vm.update_cancel_bullet('debrief',$index)">CANCEL</a>                        
                          <a ng-if="debrief.edit_me" class="btn btn-primary" ng-click="vm.update_bullet('debrief', debrief, $index)">SAVE</a>                        
                        </td>
                      </tr>
                      <tr class="dndPlaceholder background_content_dnd">
                          <td colspan="3">
                            Drop Here
                          </td>
                      </tr>
                    </tbody>

                </table>

            </div>

              <div class="card">
                <table>
                    <tr>
                        <th>Point</th>
                        <th>Formatting</th>
                        <th>Functions</th>
                    </tr>
                    <tr>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new.debrief.title" /></td>
                        <td>
                          <select class="form-control" ng-model="vm.new.debrief.bullet_format">
                            <option value="0" selected="selected">Bullet Point</option>
                            <option value="1">Heading</option>
                          </select>
                        </td>
                        <td><a class="btn btn-primary" ng-click="vm.add_bullet('debrief')" uib-tooltip="Add new item">ADD POINT</a></td>
                    </tr>

                  </table>
                </div>


      </div>

      <div class="club_docs_all" ng-if="vm.editing">
        <h2>Student Progress Items</h2>

          
            <div class="card" ng-if="vm.items.length == 0">
              You don't have any marking points for this lesson yet, please create one.
            </div>

            <div class="card" ng-if="vm.items.length > 0">
                <table>
                    <tr>
                        <th>Marking Item</th>
                        <th>Description</th>
                        <th>Functions</th>
                    </tr>
                    <tbody dnd-list="vm.items">
                      <tr ng-repeat="item in vm.items" dnd-draggable="item" dnd-moved="vm.items.splice($index, 1);save_items_order()">
                          <td>
                            <span ng-if="!item.edit_me">{{ item.title }}</span> 
                            <input ng-if="item.edit_me" type="text" class="form-control inputtext" name="title" id="title" ng-model="item.title" />
                          </td>
                          <td>
                            <span ng-if="!item.edit_me">{{ item.description }}</span> 
                            <input ng-if="item.edit_me" type="text" class="form-control inputtext" name="description" id="description" ng-model="item.description" />
                          </td>
                          <td>
                            <a ng-if="!item.edit_me" ng-click="vm.edit_item($index)" uib-tooltip="Edit"><i class="fa fa-edit list_icons"></i></a> 
                            &nbsp; 
                            <a ng-if="!item.edit_me" ng-click="vm.delete_item(item, $index)" uib-tooltip="Delete"><i class="fa fa-trash-alt list_icons"></i></a>
                            <a ng-if="item.edit_me" class="btn btn-danger" ng-click="vm.update_cancel_item($index)">CANCEL</a>                        
                            <a ng-if="item.edit_me" class="btn btn-primary" ng-click="vm.update_item(item, $index)">SAVE</a>                        
                          </td>
                      </tr>
                      <tr class="dndPlaceholder background_content_dnd">
                            <td colspan="3">
                              Drop Here
                            </td>
                      </tr>
                    </tbody>

                </table>

            </div>

              <div class="card">
                <table>
                    <tr>
                        <th><span uib-tooltip="The name of the competence that needs to be confirmed by the instructor">Marking Item</span></th>
                        <th><span uib-tooltip="Additional notes which may help the instructor ascertain competence">Description</span></th>
                        <th>Functions</th>
                    </tr>
                    <tr>
                        <td><input type="text" class="form-control inputtext" name="title" id="title" ng-model="vm.new_item.title" /></td>
                        <td><input type="text" class="form-control inputtext" name="description" id="description" ng-model="vm.new_item.description" /></td>
                        <td><a class="btn btn-primary" ng-click="vm.add_item()" uib-tooltip="Add new marking point item">ADD MARKING POINT</a></td>
                    </tr>

                  </table>
                </div>


      </div>


          <div class="btns_bottom" ng-if="vm.editing">
            <button class="btn btn-info" ng-click="back()">Back</button>
            <button class="btn btn-danger" ng-click="save()">Save</button>
          </div>

      </div>

   



       



      </form>
