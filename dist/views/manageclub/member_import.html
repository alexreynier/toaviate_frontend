<div class="centre_align_boxes_members">

    <div class="home_upper">
          <div class="back-box" ui-sref="dashboard.manage_club">
              <i class="fa fa-arrow-circle-left"></i> BACK
            </div>
          <div class="welcome_title">
            <h2>MEMBERS</h2> 
            <h4 class="capitalise">
              Import members
            </h4>
          </div>
    </div>

<!-- 
    <div> 
        Select Membership
            <ui-select ng-model="vm.imported_users2.membership" theme="select2" ng-disabled="disabled" title="Membership" append-to-body="true">
          <ui-select-match placeholder="Please select the membership">
            {{ vm.imported_users2.membership.membership_name }}
          </ui-select-match>
          <ui-select-choices repeat="membership in vm.club.memberships | filter: {membership_name: $select.search, id: $select.search}">
            <div ng-bind-html="membership.membership_name | highlight: $select.search"></div>
          </ui-select-choices>
        </ui-select>
      </div> -->

   


    <div class="club_docs">
<!-- 
      <div class="centre_if_large2 import_select_file_section" style="max-width: 500px">
        <div class="form-group">
          <label for="uploader">Select a CSV of members</label>
          <input type="file" class="form-control inputtext"  fileread="vm.import_users" />
        </div>
        <button class="btn btn-info club_add_button" ng-click="processData()">
            UPLOAD FILE
        </button>
      </div> -->

      <div class="form-group cleaner_group">
        <label class="cleaner_selector" for="card-number">Select a CSV of members: </label>
        
        <input type="file" class="form-control inputtext"  fileread="vm.import_users" />

        <button class="btn btn-danger cleaner_button"  ng-click="processData()">UPLOAD FILE</button>
      </div>

      <div class="card" ng-if="vm.imported_users.length > 0">



          <form>
            <div class="form-group searchBar">
              <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-search"></i></div>
                <input type="text" class="form-control" placeholder="Search Tool" ng-model="searchTool">
              </div>      
            </div>
          </form>

            <div class="form-group cleaner_group">
              <label class="cleaner_selector" for="card-number">Default Membership: </label>
              <ui-select ng-model="vm.default_membership" theme="bootstrap" style="width: 220px;" title="Please select a membership" append-to-body="true" class="input-group" ng-change="" required>
                    <ui-select-match placeholder="Please select a membership" >
                      {{ vm.default_membership.membership_name }}             
                    </ui-select-match>
                    <ui-select-choices repeat="membership in vm.club.memberships | filter: {membership_name: $select.search}" ui-disable-choice="membership.disabled == 1">
                      <span ng-bind-html="membership.membership_name | highlight: $select.search"></span>
                    </ui-select-choices>
                    <ui-select-no-choice>
                      <span>Nothing available during selected times</span>
                    </ui-select-no-choice>
                  </ui-select>
                  <button class="btn btn-danger cleaner_button" ng-click="vm.apply_default_memberships()">APPLY</button>
            </div>


          <div id="divID">
            <table>
              <tr>
                <td ng-repeat="h in vm.imported_headers">         

                    <div ng-if="h == 'membership_id'">
                        Membership
                    </div>

                    <div ng-if="h == 'membership_start'">
                        Membership Start Date
                    </div>

                    <div ng-if="h == 'selected'">
                        Selected
                    </div>
                   
                    <div ng-if="vm.no_show_cols.indexOf(h) == -1">

                        {{ h }}

                        <br />
                        <br />
                        <select ng-if="vm.no_show_cols.indexOf(h) == -1" ng-model="vm.imported_new_headers[$index]" ng-change="vm.change_header($index, h)">
                            <option value="">Ignore</option>
                            <option ng-repeat="(key, value) in vm.user_columns" value="{{ key }}" >{{ value }}</option>
                        </select>
                        <br />
                        <br />
         
                    </div>
                      
                </td>
            </tr>
            <tr ng-repeat="x in vm.imported_users | filter:searchTool" ng-init="sectionIndex = $index">
              <td ng-repeat="y in x">
                <!-- {{ y }} -->
                <div ng-if="vm.no_show_cols.indexOf(vm.imported_headers[$index]) == -1 && vm.imported_headers[$index]">
                    {{ y }}
                </div>

                <div ng-if='vm.imported_headers[$index] == "selected"'> <input type="checkbox" ng-model="vm.imported_users[sectionIndex].selected" ng-true-value="'true'" ng-false-value="'false'" /> 
                </div>

                  <!-- <div ng-if='vm.imported_headers[$index] == "membership_id"'> 
                    Select Membership
                        <ui-select ng-model="vm.imported_users[sectionIndex].membership" theme="select2" ng-disabled="disabled" title="Membership" append-to-body="true">
                      <ui-select-match placeholder="Please select the membership">
                        {{ vm.imported_users[sectionIndex].membership.membership_name }}
                      </ui-select-match>
                      <ui-select-choices repeat="membership in vm.club.memberships | propsFilter: {membership_name: $select.search, id: $select.search}">
                        <div ng-bind-html="membership.membership_name | highlight: $select.search"></div>
                      </ui-select-choices>
                    </ui-select>
                  </div>
 -->

                  <div class="form-group" ng-if='vm.imported_headers[$index] == "membership_id"'>
                    <label for="card-number">Select Membership</label>
                      <ui-select ng-model="vm.imported_users[sectionIndex].membership" theme="bootstrap" style="width: 220px;" title="Please select a membership" append-to-body="true" class="input-group" ng-change="" required>
                            <ui-select-match placeholder="Please select a membership">
                              {{ vm.imported_users[sectionIndex].membership.membership_name }}             
                            </ui-select-match>
                            <ui-select-choices repeat="membership in vm.club.memberships | filter: {membership_name: $select.search, id: $select.search}" ui-disable-choice="membership.disabled == 1">
                              <span ng-bind-html="membership.membership_name | highlight: $select.search"></span>
                            </ui-select-choices>
                            <ui-select-no-choice>
                              <span>Nothing available during selected times</span>
                            </ui-select-no-choice>
                          </ui-select>

                    </div>

                  <div ng-if='vm.imported_headers[$index] == "membership_start"'> 
                    Membership Starts
                    <input type="date" class="form-control" name="membership_start" id="membership_start" ng-model="vm.imported_users[sectionIndex].membership_start" />
                  </div>

              </td>
            </tr>
          </table>
        </div>


        <div>
        <table>
        </table>
        </div>

        <button class="btn btn-info club_add_button" ng-click="import_users()">
            Import Users
        </button>
      </div>
  </div>
</div>