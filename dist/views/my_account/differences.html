<div class="differences_training centre_align_boxes2">


     <div class="home_upper">
      <div class="back-box" ui-sref="dashboard.my_account">
          <i class="fa fa-arrow-circle-left"></i> BACK
        </div>

        <div class="welcome_title">
          <h2>DIFFERENCES TRAINING</h2> 
          <h4 class="capitalise">
            Manage your differences training
          </h4>
          <!-- {{ vm.welcome_message }} -->
      </div>
    </div>


    <div class="club_docs_all">

    <h2>Logbook Images</h2>
      <div class="center_if_large">


   <form name="differences">

     <div class="form-group">


        <div class="logbook_images">
            <div flow-init
               flow-files-submitted="$flow.upload()"
               flow-file-success="$file.file_return = $message"
               flow-complete="processFiles($flow.files)"
               flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]"
               class="flow_upload_box"
               >
                
                <div class="drop gallery-box" flow-btn flow-drop ng-class="dropClass">   
                  <div class="upload_middle_align">  
                    Click To Add
                    <br />OR<br /> 
                    Drag And Drop
                    <br />
                    Logbook Image
                  </div>
                </div>


                 <div ng-repeat="file in $flow.files" class="gallery-box">
                  <span class="title">{{file.name}}</span>
                  <div class="thumbnail" ng-show="$flow.files.length">
                    <img flow-img="file" />
                  </div>
                  <div class="progress progress-striped" ng-class="{active: file.isUploading()}" ng-if="(file.progress() * 100) < 100">
                    <div class="progress-bar" role="progressbar"
                         aria-valuenow="{{file.progress() * 100}}"
                         aria-valuemin="0"
                         aria-valuemax="100"
                         ng-style="{width: (file.progress() * 100) + '%'}">
                      <span class="sr-only">{{file.progress()}}% Complete</span>
                    </div>
                  </div>
                  <div class="btn-group center">
                    <a class="btn btn-xs btn-danger" ng-click="file.cancel(); remove_file(file, $flow.files);"  ng-if="(file.progress() * 100) == 100">
                      Delete
                    </a>
                  </div>
                </div>




                  <div ng-repeat="file in vm.differences.images" class="gallery-box">
                      <span class="title">{{file.name}}</span>
                      <div class="thumbnail">
                        <img src="{{file.data_uri}}" />
                      </div>
                      <div class="btn-group center">
                        <a class="btn btn-xs btn-danger" ng-click="remove_real_file(file);">
                          Delete
                        </a>
                      </div>
                  </div>


            </div>
        </div>






         


          <div class="clear"></div>
        </div>
 

      </div>
    </div>


    <div class="club_docs_all">

    <h2>Differences Training Details</h2>
      <div class="center_if_large">


    <div class="form-group">     

        <table ng-if="vm.differences.differences.length > 0">
            <tr>
                <th>
                    Difference
                </th>
                <th>
                    Date Completed
                </th>
                <th>
                    Day
                </th>
                <th>
                    Night
                </th>
                <th>
                    VFR
                </th>
                <th>
                    IFR
                </th>
                <th>
                    Remove
                </th>
            </tr>
            <tr ng-repeat="difference in vm.differences.differences">
                <td>
                    {{ difference.title }}
                </td>
                <td>
<!--                     <input type="date" ng-model="vm.differences.differences[$index].sign_off_date" />
 -->
                     <p class="input-group">
                        <input type="text" class="form-control date start" uib-datepicker-popup="{{format}}" ng-model="vm.differences.differences[$index].sign_off_date" is-open="popup['sign_off_date_'+$index].opened" datepicker-options="datePickerOptions" ng-click="open('sign_off_date_'+$index, $event)" close-text="Close" placeholder="dd/mm/yyyy" required/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open('sign_off_date_'+$index, $event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </p>

                </td>
                <td>
                    <input type="checkbox" ng-model="vm.differences.differences[$index].day" />
                </td>
                <td>
                    <input type="checkbox" ng-model="vm.differences.differences[$index].night" />
                </td>
                <td>
                    <input type="checkbox" ng-model="vm.differences.differences[$index].vfr" />
                </td>
                <td>
                    <input type="checkbox" ng-model="vm.differences.differences[$index].ifr" />
                </td>
                <td>
                    <a ng-click="remove_differences($index)">Delete</a>
                </td>
            </tr>
        </table>

    </div>


    <div class="form-group add_dif">
       <table class="vertical_1 no_lines">
          <tr>
            <td>
              <label for="ratings">Differences</label>
            </td>
            <td>
              <ui-select ng-model="vm.selected_differences" theme="bootstrap" ng-disabled="disabled" style="min-width: 500px;" title="What differences training have you done?" append-to-body="true">

                  <ui-select-match placeholder="Please select differences training...">
                    {{ vm.selected_differences.title }}
                  </ui-select-match>
                  <ui-select-choices repeat="difference in vm.all_differences | propsFilterA: {title: $select.search, id: $select.search}">
                    <div ng-bind-html="difference.title | highlight: $select.search"></div>
                  </ui-select-choices>
                </ui-select>
              </td>
              <td>
                        <button type="button" class="btn btn-info add_diff_btn add_diff_btn2" ng-click="add_differences();">ADD</button>

              </td>
            </tr>
          </table>


    </div>
  </div>
</div>



    


   

   <!--  <div class="form-group">
        <label for="license_type">What type of license do you have?</label>
        <br />
        <ui-select ng-model="vm.licence.licence_type" theme="bootstrap" ng-disabled="disabled" style="min-width: 500px;" title="What type of licence do you have?" append-to-body="true">
          <ui-select-match placeholder="Please select your license...">
            {{ vm.licence.licence_type.abbreviation }}
          </ui-select-match>
          <ui-select-choices repeat="license in vm.licence_types | propsFilter: {title: $select.search, id: $select.search, abbreviation: $select.search}">
            <div ng-bind-html="license.abbreviation | highlight: $select.search"></div>
            <small>
                <span ng-bind-html="license.title | highlight: $select.search"></span>
            </small>
          </ui-select-choices>
        </ui-select>

    </div>

    <div class="form-group">
        <label for="state_of_issue">State of Issue</label>
        <br />
        <ui-select ng-model="vm.licence.state_of_issue" theme="bootstrap" ng-disabled="disabled" style="min-width: 500px;" title="What is the state of issue of your licence?" append-to-body="true" required>

          <ui-select-match placeholder="Please select your licence state of issue...">
            {{ vm.licence.state_of_issue.country }}
          </ui-select-match>
          <ui-select-choices repeat="state in vm.authority | propsFilter: {title: $select.search, id: $select.search, country: $select.search, abbreviation: $select.search}">
            <div ng-bind-html="state.country | highlight: $select.search"></div>
             <small>
                <span ng-bind-html="state.abbreviation | highlight: $select.search"></span>
                (<span ng-bind-html="state.title | highlight: $select.search"></span>)
            </small>
          </ui-select-choices>
        </ui-select>             
    </div>

    <div class="form-group">
        <label for="license_number">License Number</label>
        <input type="text" class="form-control" name="license_number" ng-model="vm.licence.licence_number" required>
    </div>


    <div class="form-group">
        <label for="license_expiry">License Issue Date</label>
      
             <p class="input-group">
                <input type="text" class="form-control date start" uib-datepicker-popup="{{format}}" ng-model="vm.licence.licence_issue_date" is-open="popup[0].opened" datepicker-options="datePickerOptions" ng-click="open(0, $event)"  placeholder="dd/mm/yyyy" close-text="Close" required />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open(0, $event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </p>
    </div>


    <div class="form-group">
        <label for="license_expiry">License Expiry (if any)</label>
     
             <p class="input-group">
                <input type="text" class="form-control date start" uib-datepicker-popup="{{format}}" ng-model="vm.licence.licence_expiry_date" is-open="popup[1].opened" datepicker-options="datePickerOptions" ng-click="open(1, $event)"  placeholder="dd/mm/yyyy" close-text="Close" />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open(1, $event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </p>
    </div>


    <div class="form-group">
        <label for="ratings">Your Ratings</label>

        <br />
        <ui-select id="ratings" ng-model="vm.selected_rating" theme="bootstrap" style="min-width: 500px;" title="What ratings do you have on this licence?" append-to-body="true">

          <ui-select-match placeholder="Please select a rating to add to your licence...">
            {{ vm.selected_rating.title }}
          </ui-select-match>
          <ui-select-choices repeat="rating in vm.ratings | propsFilter: {title: $select.search, abbreviation: $select.search, id: $select.search}">
            <div ng-bind-html="rating.abbreviation | highlight: $select.search"></div>
            <small>
                <span ng-bind-html="rating.title | highlight: $select.search"></span>
            </small>
          </ui-select-choices>
        </ui-select>

        <button type="button" class="btn btn-info" ng-click="add_rating();">ADD RATING</button>

        <table ng-if="vm.licence.ratings.length > 0">
            <tr>
                <th>
                    Rating Name
                </th>
                <th>
                    Rating Test Date
                </th>
                <th>
                    Rating Expiry
                </th>
                <th>
                    Remove
                </th>
            </tr>
            <tr ng-repeat="rating in vm.licence.ratings">
                <td>
                    {{ rating.abbreviation }}
                </td>
                <td>

                    <p class="input-group">
                        <input type="text" class="form-control date start" uib-datepicker-popup="{{format}}" ng-model="vm.licence.ratings[$index].test_date" is-open="popup['rating_start_'+$index].opened" datepicker-options="datePickerOptions" ng-click="open('rating_start_'+$index, $event)" close-text="Close" placeholder="dd/mm/yyyy" required/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open('rating_start_'+$index, $event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </p>

                </td>
                <td>
                    <p class="input-group">
                        <input type="text" class="form-control date start" uib-datepicker-popup="{{format}}" ng-model="vm.licence.ratings[$index].expiry_date" is-open="popup['rating_expiry_'+$index].opened" datepicker-options="datePickerOptions" ng-click="open('rating_expiry_'+$index, $event)" close-text="Close" placeholder="dd/mm/yyyy" required/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open('rating_expiry_'+$index, $event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </p>

                 </td>
                <td>
                    <a ng-click="remove_rating($index)">Delete</a>
                </td>
            </tr>
        </table>

    </div> -->


        <div class="bottom_btn_diff btns_bottom">
            <button type="button" ui-sref="dashboard.my_account" class="btn btn-danger btn_bigger">CANCEL CHANGES</button>
            <button type="submit" class="btn btn-info btn_bigger" ng-click="save_differences()">SAVE DIFFERENCES</button>
        </div>
    </form>

</div>

</div>


