<div class="centre_align_boxes2">


     <div class="home_upper">
      <div class="back-box" ui-sref="dashboard.my_account">
          <i class="fa fa-arrow-circle-left"></i> BACK
        </div>
        
        <div class="welcome_title">
          <h2>PAYMENT METHODS</h2> 
          <h4 class="capitalise">
            Manage your preferred payment methods
          </h4>
          <!-- {{ vm.welcome_message }} -->
      </div>
    </div>



    <ui-view class="sub_section2">
        <button ui-sref="dashboard.my_account.payment_methods.add" class="btn btn-primary add_btn_margin">ADD PAYMENT METHOD</button>


          <table ng-if="vm.cards.length > 0">
            <tr class="bold_text">
            <!--   <td>
                Name
              </td> -->
              <td>
                Card Type
              </td>
              <td>
                Card Ending
              </td>
              <td>
                Expiry Date
              </td>
              <td>
                Primary
              </td>
              <td class="right_text_align">
                Management
              </td>
            </tr>

            <tr ng-repeat="card in vm.cards">
             <!--  <td>
                {{ card.name }}
              </td> -->
              <td>
                {{ card.brand }} ({{ card.funding }})
              </td>
              <td>
                {{ card.last4 }}
              </td>
              <td>
                {{ card.exp_month }}/{{ card.exp_year }}
              </td>
              <td>
                <input type="radio" class="" ng-click="changePrimary(card.id)" name="primary_card" ng-if="card.primary_card == 1" checked /> 
                <input type="radio" class="" ng-click="changePrimary(card.id)" name="primary_card" ng-if="card.primary_card == 0" />
              </td>
              <td class="right_text_align">
                
                <button class="btn btn-primary" ng-click="change_address(card.hash)">CHANGE ADDRESS</button>
                <button class="btn btn-danger" ng-click="delete_card(card.id)">DELETE</button>

              </td>
            </tr>
            
          </table>

          <div ng-if="vm.cards.length == 0">
              Please add a preferred payment method

                <small>
                  This is required prior to allowing you to book an aircraft. ToAviate offers a full encompassing solution which includes the billing and aircraft management, in order to ensure that you are fully setup - please add a payment method above, you will be prompted to confirm which payment method you wish to use before paying for the membership, items and flights.
                </small>

          </div>

         
          <div class="popup_bg" ng-if="vm.change_address"  ng-click="decline_change()">
          </div>

              <div class="popup_box" ng-if="vm.change_address">

                  <h3> Change Billing Address </h3>
                  <br />



                  <!-- STOLEN FROM USER PAGE //-->

                  <div class="form-group fgtwo">
                    <label for="line1">Flat Number</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.flatNumber">
                  </div>
                  <div class="form-group fgtwo">
                    <label for="line2">House Name / Number</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.houseNameNumber">
                  </div>
                  <div class="form-group fgtwo">
                    <label for="line3"  >Street</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.street">
                  </div>

                  <div class="form-group fgtwo">
                    <label for="address_city">Town / City</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.townCity">

                  </div>
                  <div class="form-group fgtwo">

                    <label for="address_locality">County</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.region">

                  </div>
                  <div class="form-group fgtwo">

                    <label for="address_postcode">Postcode</label>
                    <input type="text" class="form-control" ng-model="vm.billing_address.postalCode">

                  </div>



                

                <div class="bottom_btn btns_bottom">

                  <button ng-click="decline_change()" class="btn btn-danger">Cancel Change</button>
                  <button ng-if="error.button !== ''" ng-click="save_address()" class="btn btn-info" ng-click="">Change Address</button>


              </div>
          </div>

    </ui-view>

</div>