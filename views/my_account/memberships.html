<div class="centre_align_boxes2 myacc-page">


     <div class="home_upper">
        <div class="back-box" ui-sref="dashboard.my_account">
          <i class="fa fa-arrow-circle-left"></i> BACK
        </div>
        <div class="welcome_title">
          <h2>MEMBERSHIPS</h2> 
          <h4 class="capitalise">
            Manage your club memberships
          </h4>
      </div>
    </div>



    <ui-view class="sub_section2">
        <button ui-sref="dashboard.my_account.memberships.add" class="btn btn-primary add_btn_margin">JOIN CLUB</button>

          <div class="mc-table-wrap">
          <table ng-if="vm.memberships.length > 0">
            <tr>
              <td class="bold_text">Club</td>
              <td class="bold_text">Membership Name</td>
              <td class="bold_text">Expiry Date</td>
              <td class="bold_text">Payment Term</td>
              <td class="bold_text">Auto-Renew</td>
              <td class="bold_text">Payment Method</td>
              <td class="bold_text right_text_align">Modify</td>
            </tr>
            <tr ng-repeat="membership in vm.memberships">
              <td>{{ membership.club_name }}</td>
              <td>{{ membership.membership_name || "Passenger" }}</td>
              <td>{{ membership.membership_ends }}</td>
              <td>{{ membership.payment_term || "N/A" }}</td>
              <td>{{ (membership.auto_renew == 1)? "YES" : "NO" }}</td>
              <td>{{ (membership.gcl) ? "Direct Debit": "NOT SET" }}</td>
              <td class="right_text_align">
                <button class="btn btn-info function_btn" ui-sref="dashboard.my_account.memberships.edit({ membership_id: membership.id })" ng-if="membership.membership_id > 0">Edit</button>
              </td>
            </tr>
          </table>
          </div>

          <div class="mc-cards" ng-if="vm.memberships.length > 0">
            <div class="mc-card" ng-repeat="membership in vm.memberships">
              <div class="mc-card-header">{{ membership.club_name }}</div>
              <div class="mc-card-sub">{{ membership.membership_name || "Passenger" }}</div>
              <div class="mc-card-body">
                <div class="mc-card-grid">
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Expiry</span>
                    <span>{{ membership.membership_ends }}</span>
                  </div>
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Term</span>
                    <span>{{ membership.payment_term || "N/A" }}</span>
                  </div>
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Auto-Renew</span>
                    <span>{{ (membership.auto_renew == 1)? "YES" : "NO" }}</span>
                  </div>
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Payment</span>
                    <span>{{ (membership.gcl) ? "Direct Debit": "NOT SET" }}</span>
                  </div>
                </div>
                <button class="btn btn-info function_btn mc-card-action" ui-sref="dashboard.my_account.memberships.edit({ membership_id: membership.id })" ng-if="membership.membership_id > 0">Edit Membership</button>
              </div>
            </div>
          </div>


          <br />
          <br />

 <h4 ng-if="vm.requests.length > 0"> MY MEMBERSHIP REQUESTS</h4>

          <div class="mc-table-wrap">
          <table ng-if="vm.requests.length > 0">
            <tr>
              <td>Club</td>
              <td>Membership Name</td>
              <td>Price</td>
              <td>Payment Term</td>
              <td>Status</td>
              <td>Functions</td>
            </tr>
            <tr ng-repeat="request in vm.requests">
              <td>{{ request.title }}</td>
              <td>{{ request.membership_name }}</td>
              <td>{{ request.currency }} {{ request.price }}</td>
              <td>{{ request.payment_term }}</td>
              <td>{{ request.status }}</td>
              <td>
                <div class="functions">
                  <button ng-if="request.requested_by == 'user'" ng-click="delete_request(request.id)" class="btn btn-danger function_btn">Cancel Request</button>
                  <button ng-if="request.requested_by == 'club'" ui-sref="dashboard.my_account.memberships.accept({ request_id: request.id })" class="btn btn-info function_btn">Accept Request</button>
                  <button ng-if="request.requested_by == 'club'" ng-click="delete_request(request.id)" class="btn btn-danger function_btn">Decline Request</button>
                </div>
              </td>
            </tr>
          </table>
          </div>

          <div class="mc-cards" ng-if="vm.requests.length > 0">
            <div class="mc-card" ng-repeat="request in vm.requests">
              <div class="mc-card-header">{{ request.title }}</div>
              <div class="mc-card-sub">{{ request.membership_name }}</div>
              <div class="mc-card-body">
                <div class="mc-card-grid">
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Price</span>
                    <span>{{ request.currency }} {{ request.price }}</span>
                  </div>
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Term</span>
                    <span>{{ request.payment_term }}</span>
                  </div>
                  <div class="mc-card-stat">
                    <span class="mc-card-label">Status</span>
                    <span>{{ request.status }}</span>
                  </div>
                </div>
                <div class="mc-card-actions">
                  <button ng-if="request.requested_by == 'user'" ng-click="delete_request(request.id)" class="btn btn-danger function_btn">Cancel Request</button>
                  <button ng-if="request.requested_by == 'club'" ui-sref="dashboard.my_account.memberships.accept({ request_id: request.id })" class="btn btn-info function_btn">Accept Request</button>
                  <button ng-if="request.requested_by == 'club'" ng-click="delete_request(request.id)" class="btn btn-danger function_btn">Decline Request</button>
                </div>
              </div>
            </div>
          </div>

          <span ng-if="vm.memberships.length == 0">
              Please Join a club!
              <button ui-sref="dashboard.my_account.memberships.add" class="btn btn-primary">JOIN CLUB</button>

                <small>
                  Please join a club to manage your memberships!
                </small>

          </span>

    </ui-view>

</div>